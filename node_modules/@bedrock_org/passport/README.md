# Bedrock passport integration example

<!--toc:start-->

- [Bedrock passport integration example](#bedrock-passport-integration-example)
  - [How to Install](#how-to-install)
  - [How to integrate](#how-to-integrate)
  - [How to use](#how-to-use) - [Styling available for the panel](#styling-available-for-the-panel) - [example of using the user hook, check if user is logged in](#example-of-using-the-user-hook-check-if-user-is-logged-in)
  <!--toc:end-->

## How to Install

Create a .npmrc file in the root of your project and add the following line

```bash
//registry.npmjs.org/:_authToken=<your_token>
```

This token will be provided by the team

```bash
npm i @bedrock_org/passport
```

## How to integrate

Wrap your application or router with the bedrock-passport provider

```jsx

import { BedrockPassportProvider } from "@bedrock_org/passport";
...
const Provider: React.FC<ProviderProps> = ({ children }) => {
  return (
    <BedrockPassportProvider
      baseUrl="https://xxx" //check your tenant base url
      authCallbackUrl="http://xxx" //your callback page for handling authentication
      tenantId="tttt" //your callback page for handling authentication
      //WALLET CONNECTION PARAMETER BELOW
      walletConnectId="projectId" //your walletconnect project id
    >
      {children}
    </BedrockPassportProvider>
  );
};

```

Create the callback page for handling the token from server

```jsx
function AuthCallback() {
  const { loginCallback } = useBedrockPassport();

  useEffect(() => {
    const login = async (token: string, refreshToken: string) => {
      const success = await loginCallback(token, refreshToken);
      if (success) {
        //redirect to the page you want
        window.location.href = "/";
      }
    };

    const params = new URLSearchParams(window.location.search);

    const token = params.get("token");
    const refreshToken = params.get("token");

    if (token && refreshToken) {
      login(token, refreshToken);
    }
  }, [loginCallback]);

  return <div>Signing in...</div>;
}
```

## How to use

Once you wrapped the application with the provider,
you can start to add in the component and hooks for where you need

```jsx

import { useBedrockPassport, LoginPanel, Button } from "@bedrock_org/passport";
import "@bedrock_org/passport/dist/style.css";

...
<LoginPanel
        panelClass="bg-black text-white w-[380px]" //for the panel styling
        buttonClass="w-full hover:bg-orange-500/30" //will apply for all button atm
        logo="https://irp.cdn-website.com/e81c109a/dms3rep/multi/orange-logo-v1a-20240228.svg"
  //logo url
        title="Sign in to"//title of the panel
        logoAlt="Orange Web3"//alt text for the logo
        logoClass="ml-2 h-8"//logo styling, example height width
        showConnectWallet={true} //show the sign in with wallet button
      />
//example of using the user hook, check if user is logged in
const { isLoggedIn } = useBedrockPassport();
```

Use tailwind variable for the class customization: refer to [tailwindcss](https://tailwindcss.com/docs)

[Example Integration](https://github.com/rfl-nftplatform/bedrock-passport-example)

The library is still in development, more features will be added in the future.

### Styling available for the panel

```jsx
panelClass = ""; //for the panel styling
buttonClass = ""; //will apply for all button atm
headerClass = ""; //for the header styling
title = ""; //title of the panel
titleClass = ""; //title styling
logo = ""; //logo url
logoAlt = ""; //alt text for the logo
logoClass = ""; //logo styling, example height width
showConnectWallet = true; //false by default
walletButtonClass = ""; //wallet button styling by default will use buttonClass
```

### example of using the user hook, check if user is logged in

```jsx
const { isLoggedIn } = useBedrockPassport();
```
